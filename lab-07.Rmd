---
title: "Lab 07 - Conveying the right message through visualisation"
author: "Benjamin Egan"
date: "2-24-25"
output: github_document
---

### Load packages and data

```{r load-packages, message=FALSE}
library(tidyverse)
library(ggplot2)
```

### Create Kansas COVID Data

```{r Kansas COVID}

Kansas_Mask <- tribble(
  ~date, ~count, ~mask_status,
  "7/12", 25.5, "mask",
  "7/13", 19.8, "mask",
  "7/14", 19.7, "mask",
  "7/15", 20.5, "mask",
  "7/16", 19.8, "mask",
  "7/17", 19.8, "mask",
  "7/18", 20.5, "mask",
  "7/19", 20, "mask",
  "7/20", 20.7, "mask",
  "7/21", 21.3, "mask",
  "7/22", 19.8, "mask",
  "7/23", 19.8, "mask",
  "7/24", 20.5, "mask",
  "7/25", 19, "mask",
  "7/26", 19.5, "mask",
  "7/27", 17, "mask",
  "7/28", 16.3, "mask",
  "7/29", 16.5, "mask",
  "7/30", 16.7, "mask",
  "7/31", 16, "mask",
  "8/1", 16.3, "mask",
  "8/2", 15.8, "mask",
  "8/3", 16, "mask",
  "7/12", 9.8, "no mask",
  "7/13", 9.2, "no mask",
  "7/14", 9.5, "no mask",
  "7/15", 9.8, "no mask",
  "7/16", 9.9, "no mask",
  "7/17", 9.6, "no mask",
  "7/18", 9.55, "no mask",
  "7/19", 9, "no mask",
  "7/20", 8.4, "no mask",
  "7/21", 8.4, "no mask",
  "7/22", 8.6, "no mask",
  "7/23", 8.3, "no mask",
  "7/24", 9.8, "no mask",
  "7/25", 9.9, "no mask",
  "7/26", 10.1, "no mask",
  "7/27", 9.6, "no mask",
  "7/28", 9.6, "no mask",
  "7/29", 9.65, "no mask",
  "7/30", 10, "no mask",
  "7/31", 8.7, "no mask",
  "8/1", 9, "no mask",
  "8/2", 8.7, "no mask",
  "8/3", 9.2, "no mask",
)
Kansas_Mask

```

### Create Kansas COVID Visual

```{r Kansas visual}

Kansas_Mask %>%
ggplot(aes(
  x = date,
  y = count,
  group = mask_status
))+
  geom_line(aes(color = mask_status))+
  theme_minimal()+
   scale_color_manual(values=c("blue", "red"))+
  labs(
    x = "Date",
    y = "Average daily cases per 100k",
    title = "Kansas COVID-19 7-day rolling average in 2020",
    subtitle = "Mask Counties vs No-Mask Mandate Counties",
    color = "Mask status"
  )+
  theme(axis.text.x = element_text(angle = 45, vjust = 0.5, hjust=.5))

```

What is more clear from this visualization is the huge difference in number of cases. It's harder to see the drop in cases after mid July. From the visualization (and assuming I read the original graph correctly), it looks like places that don't enforce masks have overall lower rates of COVID cases than places that mandate masks. This seems wrong based on my prior knowledge. 

The key factors that help this visualization is the accurate scaling of the y axis. Seeing the space between the two graphs shows the clear difference no mandate makes.

To show the reverse, I would make sure that both graphs were on different scales, masking the true effect and highlighting the downward trend for masking counties (see what I did there?)



### Second Visualization

```{r Kansas visual 2}

Kansas_Mask %>%
ggplot(aes(
  x = date,
  y = count,
  group = mask_status,
))+
  facet_wrap(~mask_status, scales = "free")+
  scale_color_manual(values = c("green4","red")) +
  geom_line()+
  theme_bw()+
  labs(
    x = "Date",
    y = "Average daily cases per 100k",
    title = "Kansas COVID-19 7-day rolling average in 2020",
    subtitle = "Mask Counties vs No-Mask Mandate Counties",
    color = "Mask status"
  )+
  theme(axis.text.x = element_text(angle = 45, vjust = 0.5, hjust=.5, size = 5))

```

This is just one way to change the visual of the data to suggest a no mask policy. There is not a lot of variation in the no-mask cases. By using facet_wrap() and set the scales to free, I made the small changes appear more drastic, creating the illusion of instability.

```{r COVID visual alternate}


Kansas_Mask %>%
ggplot(aes(
  x = date,
  y = count,
  group = mask_status,
))+
  facet_wrap(~mask_status, scales = "free")+
  scale_color_manual(values = c("green4","red")) +
  geom_line()+
  theme_bw()+
  labs(
    x = "Date",
    y = "Average daily cases",
    title = "Kansas COVID-19 7-day rolling average in 2020",
    subtitle = "Mask Counties vs No-Mask Mandate Counties",
    color = "Mask status",
    caption = "Cases reported per 100k"
  )+
 theme(axis.text.x = element_text(angle = 45, vjust = 0.5, hjust=.5, size = 5),
        axis.text.y=element_blank(),
        axis.ticks.y = element_blank())


```


Ask about changing color of the data - done for piece 2. Maybe because of a different variable type?

This graph now shows incredible instability 



